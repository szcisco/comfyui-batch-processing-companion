# -*- coding: utf-8 -*-
"""
ComfyUI æ‰¹é‡å›¾ç”Ÿå›¾å·¥å…· - å¸®åŠ©æ–‡æ¡£
"""

# å¸®åŠ©æ–‡æ¡£å†…å®¹é…ç½®
HELP_CONTENT = {
    "chinese": """ComfyUI ç”Ÿå›¾æ¨¡å¼å‚æ•°é…ç½®æŠ€æœ¯æŒ‡å¯¼æ–‡æ¡£

ä¸€ã€æ–‡æ¡£è¯´æ˜
æœ¬æ–‡æ¡£ç”¨äºæŒ‡å¯¼ç”¨æˆ·é€šè¿‡é…ç½® *.ini æ–‡ä»¶ç»“åˆ (*)_API.json æ–‡ä»¶ï¼ˆComfyUI å·¥ä½œæµ "æ–‡ä»¶â†’å¯¼å‡º (API)" ç”Ÿæˆï¼‰ï¼Œå®ç°å›¾ç”Ÿå›¾ã€æ–‡ç”Ÿå›¾ä¸¤ç±»æ ¸å¿ƒç”Ÿå›¾æ¨¡å¼çš„å‚æ•°åŒ¹é…ä¸è°ƒæ•´ã€‚ç¨‹åºæš‚ä¸æ”¯æŒåœ¨å†…éƒ¨å¾®è°ƒå¤§æ¨¡å‹ï¼Œä½†å¯é€šè¿‡ *.ini + (*)_API.json ç»„åˆå‘½åçš„æ–¹å¼ï¼Œä¸ºä¸åŒå¤§æ¨¡å‹å•ç‹¬é…ç½® (*)_API.json æ–‡ä»¶ï¼Œå®ç°å¤šæ¨¡å‹è°ƒç”¨ï¼ˆåç»­ç‰ˆæœ¬å°†ä¼˜åŒ–è¯¥äº¤äº’æ–¹å¼ï¼‰ã€‚

äºŒã€æ ¸å¿ƒç”Ÿå›¾æ¨¡å¼åŠåŒ¹é…ç´¢å¼•
1. å›¾ç”Ÿå›¾æ¨¡å¼
åŒ¹é…ç´¢å¼•åï¼š[å›¾ç‰‡è½½å…¥]ã€[å›¾ç‰‡å°ºå¯¸é«˜åº¦]ã€[å›¾ç‰‡å°ºå¯¸å®½åº¦]ã€[K é‡‡æ ·æ­¥å€¼]ã€[å›¾ç‰‡è¾“å‡º]
2. æ–‡ç”Ÿå›¾ï¼ˆæ­£å‘æç¤ºè¯ï¼‰æ¨¡å¼
åŒ¹é…ç´¢å¼•åï¼š[æ­£å‘æç¤ºè¯]ã€[è´Ÿé¢æç¤ºè¯]ã€[K é‡‡æ ·æ­¥å€¼]ã€[å›¾ç‰‡å°ºå¯¸é«˜åº¦]ã€[å›¾ç‰‡å°ºå¯¸å®½åº¦]ã€[å›¾ç‰‡è¾“å‡º]
3. æ–‡ç”Ÿå›¾ï¼ˆæ­£å‘ + è´Ÿé¢æç¤ºè¯ï¼‰æ¨¡å¼
åŒ¹é…ç´¢å¼•åï¼š[æ­£å‘æç¤ºè¯]ã€[K é‡‡æ ·æ­¥å€¼]ã€[å›¾ç‰‡å°ºå¯¸é«˜åº¦]ã€[å›¾ç‰‡å°ºå¯¸å®½åº¦]ã€[å›¾ç‰‡è¾“å‡º]

ä¸‰ã€é…ç½®æ–‡ä»¶æ ¼å¼è§„èŒƒï¼ˆä»¥å›¾ç”Ÿå›¾æ¨¡å¼ä¸ºä¾‹ï¼‰
é€šç”¨é…ç½®é¡¹è¯´æ˜
æ¯ä¸ªç´¢å¼•åå¯¹åº”ç‹¬ç«‹çš„é…ç½®å—ï¼ŒåŒ…å«ä»¥ä¸‹å›ºå®šå­—æ®µï¼š

é…ç½®å­—æ®µ      | è¯´æ˜
-------------|--------------------------------------------------------
å˜é‡åºå·      | è¯¥å‚æ•°åœ¨æ¨¡å¼ä¸­çš„æ’åºç¼–å·ï¼ˆè‡ªå¢ï¼Œä» 1 å¼€å§‹ï¼‰
å˜é‡åç§°      | ComfyUI å·¥ä½œæµä¸­èŠ‚ç‚¹çš„åç§°ï¼ˆæ ¼å¼ï¼šèŠ‚ç‚¹ ID - èŠ‚ç‚¹å±•ç¤ºåç§°ï¼‰
å‚æ•°é”®å      | èŠ‚ç‚¹è¾“å…¥å‚æ•°çš„é”®åï¼ˆå¦‚ image/height/width/steps ç­‰ï¼‰
å‚æ•°å€¼        | è¯¥å‚æ•°çš„å…·ä½“å–å€¼ï¼ˆæ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´ï¼‰
æ•°æ®èŠ‚ç‚¹è·¯å¾„  | å¯¹åº” (*)_API.json ä¸­å‚æ•°çš„ JSON è·¯å¾„ï¼ˆæ ¼å¼ï¼šdata ["èŠ‚ç‚¹ ID"]["inputs"]["å‚æ•°é”®å"]ï¼‰
å˜é‡ä»£ç       | å¯¹åº” (*)_API.json ä¸­è¯¥èŠ‚ç‚¹çš„å®Œæ•´ JSON ç‰‡æ®µï¼ˆéœ€ä¿æŒè¯­æ³•æ­£ç¡®ï¼‰
å˜é‡ç»‘å®š      | ç»‘å®šçš„æ ¸å¿ƒç´¢å¼•åï¼ˆä¸æ¨¡å¼åŒ¹é…çš„ç´¢å¼•åä¸€è‡´ï¼‰


å›¾ç”Ÿå›¾æ¨¡å¼é…ç½®ç¤ºä¾‹(ini):
[å›¾ç‰‡è½½å…¥]
å˜é‡åºå· = 1
å˜é‡åç§° = 44-åŠ è½½å›¾åƒ
å‚æ•°é”®å = image
å‚æ•°å€¼ = 1 (1).png
æ•°æ®èŠ‚ç‚¹è·¯å¾„ = data["44"]["inputs"]["image"]
å˜é‡ä»£ç  = "44": {"inputs":{"image":"1 (1).png"},"class_type":"LoadImage","_meta":{"title":"åŠ è½½å›¾åƒ"}}
å˜é‡ç»‘å®š = å›¾ç‰‡è½½å…¥

[å›¾ç‰‡å°ºå¯¸é«˜åº¦]
å˜é‡åºå· = 2
å˜é‡åç§° = 49-ğŸ”§ Image Resize
å‚æ•°é”®å = height
å‚æ•°å€¼ = 1536
æ•°æ®èŠ‚ç‚¹è·¯å¾„ = data["49"]["inputs"]["height"]
å˜é‡ä»£ç  = "49": {"inputs":{"width":1024,"height":1536,"interpolation":"nearest","method":"keep proportion","condition":"always","multiple_of":0,"image":["44",0]},"class_type":"ImageResize+","_meta":{"title":"ğŸ”§ Image Resize"}}
å˜é‡ç»‘å®š = å›¾ç‰‡å°ºå¯¸é«˜åº¦

[å›¾ç‰‡å°ºå¯¸å®½åº¦]
å˜é‡åºå· = 3
å˜é‡åç§° = 49-ğŸ”§ Image Resize
å‚æ•°é”®å = width
å‚æ•°å€¼ = 1024
æ•°æ®èŠ‚ç‚¹è·¯å¾„ = data["49"]["inputs"]["width"]
å˜é‡ä»£ç  = "49": {"inputs":{"width":1024,"height":1536,"interpolation":"nearest","method":"keep proportion","condition":"always","multiple_of":0,"image":["44",0]},"class_type":"ImageResize+","_meta":{"title":"ğŸ”§ Image Resize"}}
å˜é‡ç»‘å®š = å›¾ç‰‡å°ºå¯¸å®½åº¦

[Ké‡‡æ ·æ­¥å€¼]
å˜é‡åºå· = 4
å˜é‡åç§° = 17-åŸºæœ¬è°ƒåº¦å™¨
å‚æ•°é”®å = steps
å‚æ•°å€¼ = 20
æ•°æ®èŠ‚ç‚¹è·¯å¾„ = data["17"]["inputs"]["steps"]
å˜é‡ä»£ç  = "17": {"inputs":{"scheduler":"simple","steps":20,"denoise":["72",0],"model":["79",0]},"class_type":"BasicScheduler","_meta":{"title":"åŸºæœ¬è°ƒåº¦å™¨"}}
å˜é‡ç»‘å®š = Ké‡‡æ ·æ­¥å€¼

[å›¾ç‰‡è¾“å‡º]
å˜é‡åºå· = 5
å˜é‡åç§° = 9-ä¿å­˜å›¾åƒ
å‚æ•°é”®å = filename_prefix
å‚æ•°å€¼ = ComfyUI
æ•°æ®èŠ‚ç‚¹è·¯å¾„ = data["9"]["inputs"]["filename_prefix"]
å˜é‡ä»£ç  = "9": {"inputs":{"filename_prefix":"ComfyUI","images":["63",0]},"class_type":"SaveImage","_meta":{"title":"ä¿å­˜å›¾åƒ"}}
å˜é‡ç»‘å®š = å›¾ç‰‡è¾“å‡º

å››ã€é…ç½®è¦ç‚¹
(*)_API.json æ–‡ä»¶å¿…é¡»é€šè¿‡ ComfyUI å·¥ä½œæµçš„ "æ–‡ä»¶â†’å¯¼å‡º (API)" åŠŸèƒ½ç”Ÿæˆï¼Œä¸å¯ç›´æ¥ä½¿ç”¨æ™®é€š JSON å·¥ä½œæµæ–‡ä»¶ã€‚
*.ini æ–‡ä»¶ä¸­æ¯ä¸ªé…ç½®å—çš„ã€Œå˜é‡ä»£ç ã€éœ€ä¸ (*)_API.json ä¸­å¯¹åº”èŠ‚ç‚¹çš„ JSON ç»“æ„å®Œå…¨ä¸€è‡´ï¼Œä»…è°ƒæ•´ã€Œå‚æ•°å€¼ã€éƒ¨åˆ†ã€‚
å¤šå¤§æ¨¡å‹é€‚é…ï¼šåœ¨ ComfyUI å·¥ä½œæµä¸­è°ƒæ•´å¤§æ¨¡å‹ç±»åˆ«åï¼Œå¯¼å‡ºæ–°çš„ (*)_API.json æ–‡ä»¶å¹¶å•ç‹¬å‘½åï¼Œé…åˆåŒåå‰ç¼€çš„ *.ini æ–‡ä»¶ï¼Œå³å¯å®ç°ä¸åŒå¤§æ¨¡å‹çš„å‚æ•°é…ç½®ä¸è°ƒç”¨ã€‚
å‚æ•°è°ƒæ•´åŸåˆ™ï¼šä»…ä¿®æ”¹ã€Œå‚æ•°å€¼ã€å­—æ®µï¼Œå…¶ä½™å­—æ®µï¼ˆå¦‚æ•°æ®èŠ‚ç‚¹è·¯å¾„ã€å˜é‡ä»£ç ç»“æ„ï¼‰éœ€ä¸ (*)_API.json ä¸­çš„èŠ‚ç‚¹å®šä¹‰ä¿æŒä¸€è‡´ï¼Œé¿å…é…ç½®å¤±æ•ˆã€‚

äº”ã€åé¦ˆä¸ä¼˜åŒ–
è‹¥å¯¹ç°æœ‰é…ç½®æ–¹å¼æœ‰ä¼˜åŒ–å»ºè®®ï¼ˆå¦‚æ›´äººæ€§åŒ–çš„å¤šæ¨¡å‹ç®¡ç†ã€å‚æ•°è°ƒæ•´æ–¹å¼ï¼‰ï¼Œæ¬¢è¿å‘ä½œè€…åé¦ˆï¼Œåç»­ç‰ˆæœ¬å°†ç»“åˆç”¨æˆ·éœ€æ±‚è¿­ä»£ä¼˜åŒ–ã€‚""",
    
    "english": """ComfyUI Image Generation Mode Parameter Configuration Technical Guide

1. Document Description
This document guides users to implement parameter matching and adjustment for two core image generation modes (image-to-image and text-to-image) by configuring *.ini files combined with (*)_API.json files (generated by ComfyUI workflow "File â†’ Export (API)"). The program currently does not support fine-tuning large models internally, but can separately configure (*)_API.json files for different large models through the combination naming method of *.ini + (*)_API.json to achieve multi-model calling (this interaction method will be optimized in subsequent versions).

2. Core Image Generation Modes and Matching Indexes
1. Image-to-Image Mode
Matching index names: [Image Loading], [Image Height], [Image Width], [K Sampling Steps], [Image Output]
2. Text-to-Image (Positive Prompt Only) Mode
Matching index names: [Positive Prompt], [Negative Prompt], [K Sampling Steps], [Image Height], [Image Width], [Image Output]
3. Text-to-Image (Positive + Negative Prompt) Mode
Matching index names: [Positive Prompt], [K Sampling Steps], [Image Height], [Image Width], [Image Output]

3. Configuration File Format Specification (Taking Image-to-Image Mode as Example)
General Configuration Item Description
Each index name corresponds to an independent configuration block, containing the following fixed fields:

Configuration Field      | Description
-------------------------|--------------------------------------------------------
Variable Number          | The serial number of the parameter in the mode (auto-increment, starting from 1)
Variable Name            | The name of the node in the ComfyUI workflow (format: Node ID - Node Display Name)
Parameter Key Name       | The key name of the node input parameter (such as image/height/width/steps, etc.)
Parameter Value          | The specific value of the parameter (adjust according to actual needs)
Data Node Path           | The JSON path of the parameter in (*)_API.json (format: data ["Node ID"]["inputs"]["Parameter Key Name"])
Variable Code            | The complete JSON fragment of the node in (*)_API.json (must maintain correct syntax)
Variable Binding         | The bound core index name (consistent with the index name matching the mode)

Image-to-Image Mode Configuration Example(ini)
[Image Loading]
Variable Number = 1
Variable Name = 44-Load Image
Parameter Key Name = image
Parameter Value = 1 (1).png
Data Node Path = data["44"]["inputs"]["image"]
Variable Code = "44": {"inputs":{"image":"1 (1).png"},"class_type":"LoadImage","_meta":{"title":"Load Image"}}
Variable Binding = Image Loading

[Image Height]
Variable Number = 2
Variable Name = 49-ğŸ”§ Image Resize
Parameter Key Name = height
Parameter Value = 1536
Data Node Path = data["49"]["inputs"]["height"]
Variable Code = "49": {"inputs":{"width":1024,"height":1536,"interpolation":"nearest","method":"keep proportion","condition":"always","multiple_of":0,"image":["44",0]},"class_type":"ImageResize+","_meta":{"title":"ğŸ”§ Image Resize"}}
Variable Binding = Image Height

[Image Width]
Variable Number = 3
Variable Name = 49-ğŸ”§ Image Resize
Parameter Key Name = width
Parameter Value = 1024
Data Node Path = data["49"]["inputs"]["width"]
Variable Code = "49": {"inputs":{"width":1024,"height":1536,"interpolation":"nearest","method":"keep proportion","condition":"always","multiple_of":0,"image":["44",0]},"class_type":"ImageResize+","_meta":{"title":"ğŸ”§ Image Resize"}}
Variable Binding = Image Width

[K Sampling Steps]
Variable Number = 4
Variable Name = 17-Basic Scheduler
Parameter Key Name = steps
Parameter Value = 20
Data Node Path = data["17"]["inputs"]["steps"]
Variable Code = "17": {"inputs":{"scheduler":"simple","steps":20,"denoise":["72",0],"model":["79",0]},"class_type":"BasicScheduler","_meta":{"title":"Basic Scheduler"}}
Variable Binding = K Sampling Steps

[Image Output]
Variable Number = 5
Variable Name = 9-Save Image
Parameter Key Name = filename_prefix
Parameter Value = ComfyUI
Data Node Path = data["9"]["inputs"]["filename_prefix"]
Variable Code = "9": {"inputs":{"filename_prefix":"ComfyUI","images":["63",0]},"class_type":"SaveImage","_meta":{"title":"Save Image"}}
Variable Binding = Image Output

4. Configuration Points
The (*)_API.json file must be generated through the "File â†’ Export (API)" function of the ComfyUI workflow, and cannot directly use ordinary JSON workflow files.
The "Variable Code" of each configuration block in the *.ini file must be completely consistent with the JSON structure of the corresponding node in (*)_API.json, only adjusting the "Parameter Value" part.
Multi-model adaptation: After adjusting the large model category in the ComfyUI workflow, export a new (*)_API.json file and name it separately, and match it with the *.ini file with the same name prefix to achieve parameter configuration and calling of different large models.
Parameter adjustment principle: Only modify the "Parameter Value" field, and other fields (such as data node path, variable code structure) must be consistent with the node definition in (*)_API.json to avoid configuration failure.

5. Feedback and Optimization
If you have optimization suggestions for the existing configuration method (such as more user-friendly multi-model management, parameter adjustment methods), please provide feedback to the author. Subsequent versions will be iteratively optimized based on user needs."""
}


def get_help_content(language="chinese"):
    """
    è·å–å¸®åŠ©æ–‡æ¡£å†…å®¹
    
    Args:
        language (str): è¯­è¨€ï¼Œå¯é€‰å€¼ï¼š"chinese" æˆ– "english"
        
    Returns:
        str: å¯¹åº”è¯­è¨€çš„å¸®åŠ©æ–‡æ¡£å†…å®¹
    """
    return HELP_CONTENT.get(language, HELP_CONTENT["chinese"])
